parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"IM2L":[function(require,module,exports) {
"use strict";function e(e){return new Promise((t,r)=>{chrome.runtime.sendMessage({type:"getRating",query:e},e=>{const[s,n]=e;s||r(n),t(s)})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"o4lX":[function(require,module,exports) {
"use strict";function e(e){return new Promise((t,r)=>{chrome.runtime.sendMessage({type:"getPrice",query:e},e=>{const[s,n]=e;s||r(n),t(s)})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"VdKl":[function(require,module,exports) {
"use strict";var e=a(require("./api/getRating")),t=a(require("./api/getPrice"));function a(e){return e&&e.__esModule?e:{default:e}}function l(){("https://www.lastbottlewines.com/"==window.location.href||window.location.href.includes("https://www.lastbottlewines.com/product/detail/"))&&n()}async function n(){let a=document.getElementsByClassName("offer-name")[0].innerHTML;if(isNaN(a.substring(a.length-4,a.length))||(a=a.substring(0,a.length-4)),a=(a=a.replace("NV","").replace("N.V.","")).trim())try{const p=await(0,e.default)(a),v=i(p);let h="N/A";v.length>0&&(h=await(0,t.default)(v[0].parentID),isNaN(h)||null===h||(h=(Math.round(100*h)/100).toFixed(0)));let f=document.getElementsByClassName("price-holder").length-1,w='<div class="price-holder"><div class="strikethrough default"><em style="color:#ed1c24">$</em><span class="amount" style="color:#ed1c24">'+h+'</span></div><p style="color:#ed1c24">Vivino</p></div>';if(document.getElementsByClassName("price-holder")[f].innerHTML=w+document.getElementsByClassName("price-holder")[f].innerHTML,document.getElementById("myTab").innerHTML+='<li class="nav-item offer-tab" role="menuitem" style="width: 33.3%;"><a class="" id="vivino-tab" data-toggle="tab" href="#vivino" role="tab" aria-controls="vivino" data-uw-rm-brl="false" aria-selected="false">Vivino Results</a></li>',document.querySelectorAll(".offer-tab").forEach(e=>{e.style.width="33.3%"}),v){var l,n,r,s;l='<div class="tab-pane fade" id="vivino" role="tabpanel" aria-labelledby="vivino"><div class="text-left"><p data-uw-rm-sr="">',l+='<section class="details-pane"></section>';var o,d,c,m,g="No ratings";let e=0;for(;e<v.length&&e<5;)n=v[e].name,r=v[e].parentID,s=await(0,t.default)(r),g=v[e].score,o=v[e].numOfReviews,d=v[e].trimmedImage,c=v[e].url,isNaN(s)||(s="$ "+s),isNaN(g)||null===g||(m=g+"<strong>&#9733;</strong> ("+o+" ratings)"),l+='<section class="details-pane"><h3 data-uw-rm-heading="level" role="heading" aria-level="2">'+n+"</h3>",l+='<img src="'+d+'" alt="'+n+'" style="height:300px !important;width:auto !important;">',l+='<ul class="tech-details">',l+="<li><strong>Average Price</strong>: "+s+"</li>",l+="<li><strong>Average Rating</strong>: "+m+"</li>",l+='<li><strong>Additional Details</strong>: <a href="'+c+'" target="_blank">Click here</a></li>',l+="</ul>",l+="</section>",e++;l+='<br role="presentation" data-uw-rm-sr="">',l+="</p></div></div>",document.getElementById("myTabContent").innerHTML+=l}else document.getElementById("myTabContent").innerHTML+='<div class="tab-pane fade" id="vivino" role="tabpanel" aria-labelledby="vivino"><div class="text-left"><p data-uw-rm-sr="">No matches found on Vivino. <br role="presentation" data-uw-rm-sr=""></p></div></div>'}catch(u){console.log(`${a} is not found on Vivino`)}}const i=e=>{let t=(new DOMParser).parseFromString(e,"text/html").getElementsByClassName("card"),a=[];for(let l=0;l<t.length;l++){const e=t[l].getElementsByClassName("wine-card__name");let n="";for(let t=0;t<e.length&&t<1;t++)n=e[t].textContent.trim();const i=t[l].getElementsByClassName("average__number");let r="";for(let t=0;t<i.length&&t<1;t++)r=i[t].textContent.trim();const s=t[l].getElementsByClassName("average__stars");let o="";for(let t=0;t<s.length&&t<1;t++)o=s[t].textContent.replace("ratings","").trim();const d=t[l].getElementsByClassName("wine-card__image");let c="",m="",g="";for(let t=0;t<d.length&&t<1;t++)g=(m=(c=d[t].style.backgroundImage).replace(/^url\(["']?/,"").replace(/["']?\)$/,"")).replace("300x300","x600");const u=t[l].getElementsByTagName("a");let p="",v="";for(let t=0;t<u.length&&t<1;t++)v="https://www.vivino.com"+(p=u[t].getAttribute("href"));let h=v.split("/").pop();const f=t[l].getElementsByClassName("default-wine-card");let w="";for(let t=0;t<f.length;t++)w=f[t].getAttribute("data-wine");if(!n)return;a.push({id:h,parentID:w,name:n,score:parseFloat(r),numOfReviews:parseFloat(o),image:m,trimmedImage:g,url:v})}return a};window.addEventListener("load",l);
},{"./api/getRating":"IM2L","./api/getPrice":"o4lX"}]},{},["VdKl"], null)
//# sourceMappingURL=/contentScript.js.map